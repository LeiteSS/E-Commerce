{"ast":null,"code":"import _regeneratorRuntime from\"/home/ssl/Documents/workspace/e_commerce/project_e_commerce-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/ssl/Documents/workspace/e_commerce/project_e_commerce-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/ssl/Documents/workspace/e_commerce/project_e_commerce-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{commerce}from'./lib/commerce';import{CssBaseline}from'@material-ui/core';import{Products,Navbar,Cart,Checkout}from'./components';import{BrowserRouter as Router,Switch,Route}from'react-router-dom';var App=function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),mobileOpen=_React$useState2[0],setMobileOpen=_React$useState2[1];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),cart=_useState4[0],setCart=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),order=_useState6[0],setOrder=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];var fetchProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$commerce$produ,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return commerce.products.list();case 2:_yield$commerce$produ=_context.sent;data=_yield$commerce$produ.data;setProducts(data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchProducts(){return _ref.apply(this,arguments);};}();var fetchCart=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.t0=setCart;_context2.next=3;return commerce.cart.retrieve();case 3:_context2.t1=_context2.sent;(0,_context2.t0)(_context2.t1);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchCart(){return _ref2.apply(this,arguments);};}();var handleAddToCart=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(productID,quantity){var _yield$commerce$cart$,cart;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return commerce.cart.add(productID,quantity);case 2:_yield$commerce$cart$=_context3.sent;cart=_yield$commerce$cart$.cart;setCart(cart);case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function handleAddToCart(_x,_x2){return _ref3.apply(this,arguments);};}();var handleUpdateCartQty=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(productId,quantity){var _yield$commerce$cart$2,cart;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return commerce.cart.update(productId,{quantity:quantity});case 2:_yield$commerce$cart$2=_context4.sent;cart=_yield$commerce$cart$2.cart;setCart(cart);case 5:case\"end\":return _context4.stop();}}},_callee4);}));return function handleUpdateCartQty(_x3,_x4){return _ref4.apply(this,arguments);};}();var handleRemoveFromCart=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(productId){var _yield$commerce$cart$3,cart;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return commerce.cart.remove(productId);case 2:_yield$commerce$cart$3=_context5.sent;cart=_yield$commerce$cart$3.cart;setCart(cart);case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function handleRemoveFromCart(_x5){return _ref5.apply(this,arguments);};}();var refreshCart=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var newCart;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return commerce.cart.refresh();case 2:newCart=_context6.sent;setCart(newCart);case 4:case\"end\":return _context6.stop();}}},_callee6);}));return function refreshCart(){return _ref6.apply(this,arguments);};}();var handleCaptureCheckout=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(checkoutTokenId,newOrder){var incomingOrder;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;_context7.next=3;return commerce.checkout.capture(checkoutTokenId,newOrder);case 3:incomingOrder=_context7.sent;setOrder(incomingOrder);refreshCart();_context7.next=11;break;case 8:_context7.prev=8;_context7.t0=_context7[\"catch\"](0);setErrorMessage(_context7.t0.data.error.message);case 11:case\"end\":return _context7.stop();}}},_callee7,null,[[0,8]]);}));return function handleCaptureCheckout(_x6,_x7){return _ref7.apply(this,arguments);};}();var handleEmptyCart=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var _yield$commerce$cart$4,cart;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return commerce.cart.empty();case 2:_yield$commerce$cart$4=_context8.sent;cart=_yield$commerce$cart$4.cart;setCart(cart);case 5:case\"end\":return _context8.stop();}}},_callee8);}));return function handleEmptyCart(){return _ref8.apply(this,arguments);};}();useEffect(function(){fetchProducts();fetchCart();},[]);var handleDrawerToggle=function handleDrawerToggle(){return setMobileOpen(!mobileOpen);};return/*#__PURE__*/React.createElement(Router,null,/*#__PURE__*/React.createElement(\"div\",{style:{display:'flex'}},/*#__PURE__*/React.createElement(CssBaseline,null),/*#__PURE__*/React.createElement(Navbar,{totalItems:cart.total_items,handleDrawerToggle:handleDrawerToggle}),/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\"},/*#__PURE__*/React.createElement(Products,{products:products,onAddToCart:handleAddToCart,handleUpdateCartQty:true})),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/cart\"},/*#__PURE__*/React.createElement(Cart,{cart:cart,handleUpdateCartQty:handleUpdateCartQty,handleRemoveFromCart:handleRemoveFromCart,handleEmptyCart:handleEmptyCart})),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/checkout\"},/*#__PURE__*/React.createElement(Checkout,{cart:cart,order:order,onCaptureCheckout:handleCaptureCheckout,error:errorMessage})))));};export default App;","map":{"version":3,"sources":["/home/ssl/Documents/workspace/e_commerce/project_e_commerce-main/src/App.js"],"names":["React","useEffect","useState","commerce","CssBaseline","Products","Navbar","Cart","Checkout","BrowserRouter","Router","Switch","Route","App","mobileOpen","setMobileOpen","products","setProducts","cart","setCart","order","setOrder","errorMessage","setErrorMessage","fetchProducts","list","data","fetchCart","retrieve","handleAddToCart","productID","quantity","add","handleUpdateCartQty","productId","update","handleRemoveFromCart","remove","refreshCart","refresh","newCart","handleCaptureCheckout","checkoutTokenId","newOrder","checkout","capture","incomingOrder","error","message","handleEmptyCart","empty","handleDrawerToggle","display","total_items"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { commerce } from './lib/commerce';\nimport { CssBaseline } from '@material-ui/core';\nimport { Products, Navbar, Cart, Checkout } from './components';\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\nconst App = () => {\n    const [mobileOpen, setMobileOpen] = React.useState(false);\n    const [products, setProducts] = useState([]);\n    const [cart, setCart] = useState({});\n    const [order, setOrder] = useState({});\n    const [errorMessage, setErrorMessage] = useState('');\n\n    const fetchProducts = async () => {\n        const { data } = await commerce.products.list();\n\n        setProducts(data);\n    }\n\n    const fetchCart = async () => {\n        setCart(await commerce.cart.retrieve());\n    }\n\n    const handleAddToCart = async (productID, quantity) => {\n        const { cart } = await commerce.cart.add(productID, quantity);\n\n        setCart(cart);\n    }\n\n    const handleUpdateCartQty = async (productId, quantity) => {\n        const { cart } = await commerce.cart.update(productId, { quantity });\n\n        setCart(cart);\n    }\n\n    const handleRemoveFromCart = async (productId) => {\n        const { cart } = await commerce.cart.remove(productId);\n\n        setCart(cart);\n    }\n\n    const refreshCart = async () => {\n        const newCart = await commerce.cart.refresh();\n\n        setCart(newCart);\n    }\n\n    const handleCaptureCheckout = async (checkoutTokenId, newOrder) => {\n        try {\n            const incomingOrder = await commerce.checkout.capture(checkoutTokenId, newOrder);\n\n            setOrder(incomingOrder);\n            refreshCart();\n        } catch (error) {\n            setErrorMessage(error.data.error.message);\n        }\n    }\n\n    const handleEmptyCart = async () => {\n        const { cart } = await commerce.cart.empty();\n\n        setCart(cart);\n    }\n\n    useEffect(() => {\n        fetchProducts();\n        fetchCart();\n    }, []);\n\n    const handleDrawerToggle = () => setMobileOpen(!mobileOpen);\n\n    return (\n        <Router>\n            <div style={{ display: 'flex' }}>\n            <CssBaseline />\n                <Navbar totalItems={cart.total_items} handleDrawerToggle={handleDrawerToggle}/>\n                <Switch>\n                    <Route exact path=\"/\">\n                        <Products products={products} onAddToCart={handleAddToCart} handleUpdateCartQty />\n                    </Route>\n                    <Route exact path=\"/cart\">\n                        <Cart \n                            cart={cart} \n                            handleUpdateCartQty={handleUpdateCartQty} \n                            handleRemoveFromCart={handleRemoveFromCart} \n                            handleEmptyCart={handleEmptyCart}\n                        />\n                    </Route>\n                    <Route exact path=\"/checkout\">\n                        <Checkout \n                            cart={cart}\n                            order={order}\n                            onCaptureCheckout={handleCaptureCheckout}\n                            error={errorMessage}\n                        />\n                    </Route>\n                </Switch>\n            </div>\n        </Router>\n    );\n};\n\nexport default App"]},"metadata":{},"sourceType":"module"}